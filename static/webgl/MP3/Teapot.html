<!DOCTYPE html>
<html lang="en">

<head>
    <title>MP3 Part1 </title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/webgl.css">
</head>

<script type="x-shader/x-vertex" id="vshaderSB">
     uniform mat4 projection;
     uniform mat4 modelview;
     attribute vec3 coords;
     varying vec3 vCoords;
     void main() {
        vec4 eyeCoords = modelview * vec4(coords,1.0);
        gl_Position = projection * eyeCoords;
        vCoords = coords;
     }
</script>

<script type="x-shader/x-fragment" id="fshaderSB">
     precision mediump float;
     varying vec3 vCoords;
     uniform samplerCube skybox;
     void main() {
          gl_FragColor = textureCube(skybox, vCoords);
     }
</script>


<script type="x-shader/x-vertex" id="vshader">
     uniform mat4 projection;
     uniform mat4 modelview;
     attribute vec3 coords;
     attribute vec3 normal;
     attribute vec3 texturecoords;

     varying vec3 viewCoords;
     varying vec3 vNormal;
     varying vec2 vTextureCoords;
     void main() {
        vec4 eyeCoords = modelview * vec4(coords,1.0);
        gl_Position = projection * eyeCoords;
        vTextureCoords = texturecoords.xy;
        viewCoords = eyeCoords.xyz;
        vNormal = normal;
     }
</script>

<script type="x-shader/x-fragment" id="fshader">
     precision mediump float;
     varying vec3 vCoords;
     varying vec3 vNormal;
     varying vec2 vTextureCoords;
     varying vec3 viewCoords;
     
     uniform vec3 uLightPosition;
    
     uniform vec3 uAmbientLightColor;
     uniform vec3 uDiffuseLightColor;
     uniform vec3 uSpecularLightColor;

     uniform vec3 uAmbientMaterialColor;
     uniform vec3 uSpecularMaterialColor;
     uniform vec3 uDiffuseMaterialColor;
    
     uniform float uShininess;

     uniform mat3 normalMatrix;
     uniform mat3 invVT;
     void main() {
    
     // Calculate the vector (l) to the light source
     vec3 vectorToLightSource = normalize(uLightPosition - viewCoords);

     // Transform the normal (n) to eye coordinates
     vec3 normalEye = normalize(normalMatrix * vNormal);

     
     // The camera in eye coordinates is located in the origin and is pointing
     // along the negative z-axis. Calculate viewVector (v) 
     // in eye coordinates as:
     // (0.0, 0.0, 0.0) - vertexPositionEye3
     vec3 viewVectorEye = -normalize(viewCoords);

     // Calculate n dot l for diffuse lighting （a.k.a. "Lambert's cosine law"）
     float diffuseLightWeightning = max(dot(normalEye, 
                                    vectorToLightSource), 0.0);

     // ==================== Blinn-Phong Illumination Model ==================                                   
     // Calculate the halfway vector (h) of vector (l) to the light source and viewVector (v)
     vec3 halfwayVector = normalize(viewVectorEye + vectorToLightSource);

     // Compute the specular term 
     // Replace pow(rdotv, uShininess) by pow(hdotn, modified_uShininess)
     float hdotn = max(dot(halfwayVector,normalEye), 0.0);
     float specularLightWeightning = pow(hdotn, uShininess * 4.0);
     
     // Sum up all three reflection components and send to the fragment shader
     gl_FragColor = vec4(((uAmbientLightColor*uAmbientMaterialColor)
                + (uDiffuseLightColor*uDiffuseMaterialColor) * diffuseLightWeightning
                + (uSpecularLightColor*uSpecularMaterialColor) * specularLightWeightning),1.0);
     }
</script>


<script type="text/javascript" src="jquery-2.1.0.min.js"></script>
<script type="text/javascript" src="webgl-utils.js"></script>
<script type="text/javascript" src="gl-matrix-min.js"></script>
<script type="text/javascript" src="simple-rotator.js"></script>
<script type="text/javascript" src="loadObjects.js"></script>
<script type="text/javascript" src="teapot.js"></script>


<body onload="startup()" style="background-color:#DDD">

    <!-- 标题样式 title-->
    <h2 class="title">Part A....Everything but the environment mapping&nbsp;</h2>
    <!-- 文字描述样式 desc -->
    <div class="desc">
        <p id="message" style="font-weight:bold">Drag your mouse on the canvas to rotate the view.
            <br>Use left and right arrow keys to rotate the teapot only.
            <br>
        </p>
        <p id="message" style="font-weight:bold">
            <br>Notice: node.js might be needed to load local files,
            <br>please refer to Readme.txt in the working directory for the instruction.
        </p>
    </div>
    <!-- canvas \video 样式 -->
    <div class="content-box">

        <!-- canvas  示例-->
        <canvas width=600 height=600 id="glcanvas" style="background-color:blue"></canvas>
        <!-- video 示例 -->
        <video controls src="http://adrian.pw/talkviz/movies/stream_xy.mp4">

        </video>
    </div>


</body>

</html>